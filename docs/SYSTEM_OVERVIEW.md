# 培训班课时管理系统 - 系统概述

## 🎯 系统简介

培训班课时管理系统是一个基于 Node.js + Express + SQLite 的现代化培训管理平台，集成了学生管理、课时管理、收入统计、智能扣除项和利润计算等核心功能。

## ✨ 核心特性

### 🎓 学生管理
- **学生信息管理**: 添加、编辑、删除学生信息
- **课时管理**: 充值课时、扣除课时、查询剩余课时
- **历史记录**: 完整的充值、消费记录追踪

### 💰 智能利润计算
- **扣除项管理**: 支持百分比、固定金额、每课时费用等多种类型
- **频率控制**: 单次扣除（报名时）和多次扣除（每次充值）
- **自动应用**: 新学员自动应用单次扣除项，充值自动应用多次扣除项
- **利润分析**: 实时计算利润和利润率

### 📊 数据统计
- **业绩仪表盘**: 总收入、学生数、课时数等关键指标
- **趋势分析**: 收入趋势、课时消耗趋势图表
- **时间段筛选**: 支持全部、当月、本周、今日等时间维度

### 🎨 现代化界面
- **Vue3 + Element Plus**: 响应式、美观的用户界面
- **实时更新**: 数据变化实时反映到界面
- **用户体验**: 直观的操作流程和友好的交互设计

## 🏗️ 技术架构

### 后端技术栈
- **Node.js**: 服务器运行环境
- **Express.js**: Web应用框架
- **SQLite3**: 轻量级数据库
- **body-parser**: 请求体解析中间件

### 前端技术栈
- **Vue3**: 渐进式JavaScript框架
- **Element Plus**: 基于Vue3的UI组件库
- **Axios**: HTTP客户端
- **ECharts**: 数据可视化图表库

### 数据库设计
- **students**: 学生信息表
- **income**: 收入记录表
- **classes**: 上课记录表
- **deduction_configs**: 扣除项配置表
- **student_deductions**: 学生扣除项关联表

## 🚀 快速开始

### 1. 环境要求
- Node.js 14.0+
- npm 6.0+

### 2. 安装依赖
```bash
npm install
```

### 3. 数据库初始化
```bash
# 运行数据库迁移
node migrate_deductions.js

# 初始化扣除项配置
node init_deductions.js
```

### 4. 启动服务
```bash
# 启动后端服务
node app.js

# 启动前端服务（新终端）
cd frontend
npm run dev
```

### 5. 访问系统
- 后端API: http://localhost:3000
- 前端界面: http://localhost:3001

## 📋 功能模块

### 学生管理模块
- 学生信息的增删改查
- 课时充值和消费记录
- 学生详情和历史记录查看

### 扣除项管理模块
- 扣除项配置的创建和编辑
- 频率设置（单次/多次）
- 类型支持（百分比/固定金额/每课时费用）

### 利润计算模块
- 个人利润计算
- 总体利润统计
- 扣除项分类分析

### 统计分析模块
- 业绩数据统计
- 趋势图表展示
- 时间段筛选分析

## 🔧 系统配置

### 数据库配置
- 数据库文件: `training.db`
- 自动创建表结构
- 支持数据迁移和升级

### API接口
- RESTful API设计
- 统一的JSON响应格式
- 完善的错误处理机制

### 前端配置
- 开发服务器端口: 3001
- 生产环境构建支持
- 响应式设计适配

## 📈 业务场景

### 培训班运营
1. **新学员报名**: 录入学生信息，自动应用单次扣除项
2. **课时充值**: 学员充值课时，自动应用多次扣除项
3. **上课记录**: 记录课时消耗，更新剩余课时
4. **利润分析**: 查看个人和总体利润情况

### 财务管理
1. **收入统计**: 实时统计培训收入
2. **成本分析**: 通过扣除项分析各项成本
3. **利润计算**: 精确计算净利润和利润率
4. **趋势分析**: 分析收入和利润变化趋势

## 🛡️ 数据安全

### 数据完整性
- 使用数据库事务确保数据一致性
- 外键约束保证数据关联完整性
- 唯一性约束防止重复数据

### 错误处理
- 完善的异常捕获和处理
- 详细的错误信息返回
- 事务回滚机制

### 数据备份
- 定期备份数据库文件
- 支持数据导入导出
- 版本控制和迁移支持

## 🔮 扩展功能

### 计划中的功能
- 教师管理模块
- 课程管理功能
- 财务报表生成
- 数据导出功能

### 技术优化
- 数据库索引优化
- API性能优化
- 前端组件优化
- 缓存机制实现

## 📞 技术支持

### 文档资源
- 完整的API文档
- 详细的部署指南
- 问题修复说明
- 开发参考文档

### 问题排查
- 系统日志查看
- 数据库状态检查
- API接口测试
- 前端控制台调试

---

**系统版本**: 2.0.1  
**最后更新**: 2024年  
**开发团队**: 培训班课时管理系统团队
